---
title: å›¢é˜Ÿä»£ç é£æ ¼
date: 2024-05-27 15:45:49
permalink: /pages/223a36/
categories:
  - å‰ç«¯
  - å›¢é˜Ÿåä½œ
tags:
  - é£æ ¼
author: 
  name: pb
  link: https://github.com/dongyidongnan
---
# å›¢é˜Ÿä»£ç é£æ ¼ç»Ÿä¸€è§„èŒƒ(vue)

## ä¸€ã€æ¦‚è¿°

å›¢é˜Ÿä»£ç é£æ ¼åŒ–ï¼Œæ˜¯æŒ‡åœ¨å›¢é˜Ÿè¿›è¡Œå¼€å‘å·¥ä½œæ—¶ï¼Œå¯¹ä»£ç çš„ç¼–å†™æ ‘ç«‹ä¸€å®šè§„èŒƒï¼Œä»¥æé«˜å›¢é˜Ÿåä½œæ•ˆç‡å’Œä»£ç è´¨é‡ï¼Œè€Œé€šå¸¸é£æ ¼åŒ–çš„è§„èŒƒåŒ…æ‹¬å˜é‡å‘½åè§„èŒƒã€ä»£ç ä¹¦å†™æ ¼å¼ã€è¯­æ³•è§„èŒƒã€æ³¨é‡Šè§„èŒƒç­‰ã€‚å¼€å‘ä¸­ä¿æŒç»Ÿä¸€çš„ä»£ç é£æ ¼å¯¹äºæå‡å¼€å‘æ•ˆç‡ã€ä¿éšœäº§å“è´¨é‡ã€ä¿ƒè¿›å›¢é˜Ÿåä½œä»¥åŠæŒç»­äº¤ä»˜å…·æœ‰é•¿è¿œä»·å€¼ã€‚æœ¬æ–‡ä¸»è¦é€šè¿‡eslintã€prettierã€ã€huskyç­‰å·¥å…·çš„ä½¿ç”¨æ¥ç»Ÿä¸€å›¢é˜Ÿä»£ç é£æ ¼ã€‚

å›¢é˜Ÿä»£ç é£æ ¼çš„ç»Ÿä¸€ä¼˜åŠ¿ï¼š

- **å¢å¼ºä»£ç çš„å¯è¯»æ€§**
  ç»Ÿä¸€çš„ä»£ç é£æ ¼èƒ½æå¤§å¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œä½¿å¾—å›¢é˜Ÿæˆå‘˜æ— éœ€é€‚åº”å¤šç§ä¸åŒçš„é£æ ¼ï¼Œå°±èƒ½å¿«é€Ÿç†è§£ä»»ä½•å›¢é˜Ÿæˆå‘˜ç¼–å†™çš„ä»£ç ã€‚ä¸€è‡´æ€§çš„ä»£ç é£æ ¼å‡å°‘äº†è®¤çŸ¥è´Ÿæ‹…ï¼Œå¸®åŠ©å¼€å‘äººå‘˜æ›´å¿«åœ°å®šä½å’Œç†è§£ä»£ç é€»è¾‘ã€‚
- **æé«˜å›¢é˜Ÿæˆå‘˜çš„åä½œæ•ˆç‡**
  å›¢é˜Ÿåˆä½œä¸­ï¼Œç»Ÿä¸€çš„ä»£ç é£æ ¼æ„å‘³ç€æˆå‘˜ä»¬åœ¨å®¡æŸ¥ä»£ç ã€åˆå¹¶åˆ†æ”¯æˆ–æ¥æ‰‹ä»–äººå·¥ä½œæ—¶èƒ½å¤ŸèŠ‚çœæ—¶é—´ï¼Œé™ä½å› é£æ ¼ä¸ä¸€è‡´å¯¼è‡´çš„è¯¯è§£å’Œæ··æ·†ã€‚å½“å›¢é˜Ÿæˆå‘˜ä¹‹é—´åˆ‡æ¢ä»»åŠ¡æ—¶ï¼Œæ— éœ€èŠ±è´¹é¢å¤–æ—¶é—´å»é€‚åº”ä¸åŒçš„ä»£ç ä¹¦å†™ä¹ æƒ¯ã€‚
- **ä¼˜åŒ–ç‰ˆæœ¬æ§åˆ¶**
  åœ¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå¦‚Gitä¸­ï¼Œç”±äºä»£ç é£æ ¼çš„å˜æ›´ä¸ä¼šå¼•èµ·ä¸å¿…è¦çš„å†²çªï¼Œæ‰€ä»¥ä»£ç ä»“åº“ä¼šæ›´åŠ å¹²å‡€ï¼Œä»£ç å®¡æŸ¥è¿‡ç¨‹ä¹Ÿä¼šæ›´ä¸ºé«˜æ•ˆã€‚

## äºŒã€å·¥å…·ä»‹ç»

### 1. eslint

#### ä»‹ç»

ESLint æ˜¯ä¸€ä¸ªç”¨æ¥è¯†åˆ« ECMAScript å¹¶ä¸”æŒ‰ç…§è§„åˆ™ç»™å‡ºæŠ¥å‘Šçš„ä»£ç æ£€æµ‹å·¥å…·ï¼Œä½¿ç”¨å®ƒå¯ä»¥é¿å…ä½çº§é”™è¯¯å’Œç»Ÿä¸€ä»£ç çš„é£æ ¼ã€‚å®ƒæ‹¥æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼šæŸ¥å‡º JavaScript ä»£ç è¯­æ³•é—®é¢˜ã€‚æ ¹æ®é…ç½®çš„è§„åˆ™ï¼Œæ ‡è®°ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ã€‚è‡ªåŠ¨ä¿®å¤ä¸€äº›ç»“æ„ã€é£æ ¼é—®é¢˜ã€‚é˜²æ­¢ä»£ç å¾ˆéš¾ç»´æŠ¤ï¼Œå¯ä»¥å¸®æˆ‘ä»¬æ£€æŸ¥æœ‰æ²¡æœ‰æ­»å¾ªç¯ï¼Œæœ‰æ²¡æœ‰å®šä¹‰ä½†æœªä½¿ç”¨çš„å˜é‡ç­‰ç­‰ã€‚
æ³¨ï¼šESlint å¸¸ç”¨äºä»£ç è¯­æ³•çš„æ£€æµ‹ï¼Œç›®å‰ ESlint çš„æ ¼å¼åŒ–å™¨æ­£ä¸è¢«å…¶å¼€å‘å›¢é˜Ÿå»ºè®®ã€‚
ESLintå®˜æ–¹æ–‡æ¡£ï¼š<https://eslint.cn/>

#### ä½¿ç”¨æ–¹æ³•

aã€å®‰è£…ä¾èµ–

```npm
pnpm install -D eslint @eslint/create-config
```

ä¸‹é¢çš„å®‰è£…çš„ä¾èµ–æ˜¯ä¸ºäº†è§£å†³eslintä¸priterçš„å†²çªé—®é¢˜

```npm
pnpm install -D eslint-config-prettier
eslint-plugin-prettier
```

eslint-config-prettier çš„ä½œç”¨æ˜¯å…³é—­eslintä¸­ä¸prettierç›¸äº’å†²çªçš„è§„åˆ™ã€‚
eslint-plugin-prettier çš„ä½œç”¨æ˜¯èµ‹äºˆeslintç”¨prettieræ ¼å¼åŒ–ä»£ç çš„èƒ½åŠ›ã€‚

bã€ç”Ÿæˆé…ç½®æ–‡ä»¶

```npm
#  ç”Ÿæˆ ESLint é…ç½®æ–‡ä»¶æ¨¡æ¿
npx eslint --init
```

cã€eslintçš„ä½¿ç”¨

eslintçš„ä½¿ç”¨ä¸»è¦åˆ†ä¸ºä¸¤ç§æ–¹å¼ã€‚
ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨å•ç‹¬çš„.eslintrcé…ç½®æ–‡ä»¶ï¼Œå…¶åç¼€åŒ…æ‹¬.jsã€.yamlã€.jsonç­‰ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ— è®ºæ˜¯.eslintrc.jsè¿˜æ˜¯.eslintrc.cjsï¼Œéƒ½å¯ä»¥é€šè¿‡JavaScriptèƒ½åŠ›æ¥å®ç°æ›´çµæ´»å’Œå¤æ‚çš„é…ç½®ç®¡ç†ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ.eslintrc.jsonæ›´é€‚åˆç®€å•çš„ã€å›ºå®šä¸å˜çš„é…ç½®åœºæ™¯ã€‚å½“ç„¶ï¼Œæ‰€æœ‰è¿™äº›é…ç½®æ–‡ä»¶éƒ½ä¼šè¢«ESLintè‡ªåŠ¨è¯†åˆ«å’ŒåŠ è½½ï¼Œå¹¶åº”ç”¨äºå¯¹åº”çš„é¡¹ç›®ã€‚
ç¬¬äºŒç§æ˜¯åœ¨ package.json æ–‡ä»¶ä¸­åˆ›å»º eslintConfig å±æ€§å¹¶åœ¨é‚£é‡Œå®šä¹‰é…ç½®ï¼Œå…¶é…ç½®æ–¹å¼ä¸.jsonæ ¼å¼çš„é…ç½®æ–‡ä»¶ç›¸åŒã€‚

**æˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨ç¬¬ä¸€ç§å•ç‹¬çš„.eslintrc.cjsé…ç½®æ–‡ä»¶ã€‚**

```js
module.exports = {
  /*
   æ­¤å¤„ä¸ºæ ¹èŠ‚ç‚¹ï¼Œåœ¨ ESLint å¯¹é…ç½®æ–‡ä»¶çš„æŸ¥æ‰¾ä¸­ï¼Œä¸ä¼šè¶Šè¿‡æ­¤çº§å†å‘æ›´é«˜çº§çš„çˆ¶èŠ‚ç‚¹è¿›è¡Œæœç´¢   */
  // root: true,
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  // å¼•å…¥æ¨èçš„è¯­æ³•æ ¡éªŒè§„åˆ™
  extends: [
    "eslint:recommended",
    "plugin:vue/vue3-recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:prettier/recommended", // æ–°å¢ï¼Œå¿…é¡»æ”¾åœ¨æœ€åé¢
    "./.eslintrc-auto-import.json"
  ],
  overrides: [],
  /*
   è¿™é‡Œä¸€å®šè¦é…ç½®å¯¹ å…ˆä½¿ç”¨vue-eslint-parser å†ä½¿ç”¨@typescript-eslint/parser
   å…ˆè§£æ <template> æ ‡ç­¾ä¸­çš„å†…å®¹ ç„¶åå†è§£æ vue <script> æ ‡ç­¾ä¸­çš„ TS ä»£ç 
   */
  // é€‰æ‹©ä½¿ç”¨çš„è§£æå™¨
  parser: 'vue-eslint-parser',
  // è§£æå™¨çš„è¯¦ç»†é…ç½®
  parserOptions: {
    // ä½¿ç”¨æœ€æ–°ç‰ˆ ES è¯­æ³•
    ecmaVersion: 'latest',
    // ä½¿ç”¨ ESLint TS è§£æå™¨
    parser: '@typescript-eslint/parser',
    // ä½¿ç”¨ ES æ¨¡å—åŒ–è§„èŒƒ
    sourceType: 'module',
  },
  // ä½¿ç”¨çš„æ’ä»¶
  plugins: ['vue', '@typescript-eslint'],
  // è‡ªå®šä¹‰è§„åˆ™
  rules: {
    "no-debugger": 0,
    '@typescript-eslint/no-explicit-any': 0, // ç¦æ­¢ä½¿ç”¨anyç±»å‹
    '@typescript-eslint/no-unused-vars':0,  //ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡
    // å…³é—­åç§°æ ¡éªŒ è¦æ±‚ç»„ä»¶åç§°å§‹ç»ˆä¸º â€œ-â€ é“¾æ¥çš„å•è¯
    "vue/multi-word-component-names": "off"
    // æ·»åŠ ç»„ä»¶å‘½åå¿½ç•¥è§„åˆ™
    // "vue/multi-word-component-names": ["error",{
    //   "ignores": ["index","User","401",'403','404','500','login']  //åœ¨è¿™ä¸ªæ•°ç»„ä¸­åŠ å…¥éœ€è¦å¿½ç•¥çš„ç»„ä»¶å
    // }]
  },
};

```

dã€eslintçš„ä»£ç ä¿®å¤

```json
// package.json
// --cache ä¸ºä»…æ£€æµ‹æ”¹åŠ¨è¿‡çš„ä»£ç 
// --max-warnings 0 è¡¨ç¤ºå‡ºç°è¶…è¿‡0ä¸ªè­¦å‘Šå¼ºåˆ¶eslintä»¥é”™è¯¯çŠ¶æ€æ¨å‡º
"scripts": {
  "lint:eslint": "eslint --cache --max-warnings 0 {src,mock}/**/*.{vue,ts,tsx} --fix",
},
```

å¤§éƒ¨åˆ†IDEæ”¯æŒåœ¨ä¿®æ”¹ä»£ç åè¿›è¡Œè‡ªåŠ¨ä¿®å¤
WebStormeï¼šç›´æ¥åœ¨Settingä¸­æœç´¢ESLintå³å¯è¿›è¡Œé…ç½®
![Alt text](./image.png)
VSCodeï¼šéœ€è¦åœ¨é¡¹ç›®ç›®å½•ä¸‹åŠ å…¥å¦‚ä¸‹é…ç½®æ–‡ä»¶ï¼Œè¿˜éœ€è¦ä¸‹è½½ESLintæ’ä»¶

```json
// .vscode/settings.json
{
  "editor.codeActionsOnSave": {
    "source.fixAll": true
  }
}
```

eã€å¿½ç•¥æ–‡ä»¶é…ç½®
æ·»åŠ .eslintignoreæ–‡ä»¶

```ignore
/lib
/dist
node_modules
*.md
.vscode
.idea
/public
/docs
.husky
.local
/bin
/src/assets/

```

### 2. prettier

#### prettierä»‹ç»

Prettier æ˜¯ä¸€ä¸ªæœ‰æ€åº¦ï¼ˆOpinionatedï¼‰çš„ä»£ç æ ¼å¼åŒ–ç¨‹åºåœ¨ã€‚æ•´ä¸ªä»£ç åº“ä¸­å¼ºåˆ¶æ‰§è¡Œä¸€è‡´çš„ä»£ç é£æ ¼ï¼Œä¸ä¼šå½±å“åˆ° AST çš„ä»£ç æ ¼å¼ï¼Œå®ƒåˆ é™¤æ‰€æœ‰åŸå§‹é£æ ¼å¹¶ç¡®ä¿æ‰€æœ‰è¾“å‡ºçš„ä»£ç éƒ½ç¬¦åˆä¸€è‡´çš„é£æ ¼ã€‚
prettierå®˜æ–¹æ–‡æ¡£ï¼š<https://prettier.nodejs.cn/docs/en/index.html>

#### prettierçš„ä½¿ç”¨

aã€ å®‰è£…prettier

```npm
pnpm install -D prettier
```

bã€ä½¿ç”¨é…ç½®
Prettieré…ç½®æ–‡ä»¶åç§°å¯ä»¥ä¸º .prettierrcã€.prettierrc.jsonã€.ptettierrc.jsã€.ptettier.config.jsã€ .prettierrc.cjsã€.prettierrc.yamlã€.prettierrc.ymlç­‰ã€‚
æˆ‘ä»¬ç»Ÿä¸€é‡‡ç”¨çš„æ˜¯.prettierrc.csjæ ¼å¼æ–‡ä»¶ã€‚

```js
// é…ç½®å‡ ä¸ªå¸¸ç”¨çš„å°±å¯ä»¥
module.exports = {
  experimentalTernaries: false, // å®éªŒä¸‰å…ƒç»„ï¼Œåœ¨ Prettier çš„æ–°çš„ä¸‰è¿›åˆ¶æ ¼å¼ æˆä¸ºé»˜è®¤è¡Œä¸ºä¹‹å‰å°è¯•ä¸€ä¸‹ã€‚
  printWidth: 120, // æ‰“å°å®½åº¦
  tabWidth: 2, // æ ‡ç­¾å®½åº¦
  useTabs: false, // ç”¨åˆ¶è¡¨ç¬¦è€Œä¸æ˜¯ç©ºæ ¼ç¼©è¿›è¡Œ
  semi: false, // åœ¨è¯­å¥æœ«å°¾æ‰“å°åˆ†å·
  singleQuote: true, // ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·
  quoteProps: 'preserve', // å¼•å·å±æ€§
  jsxSingleQuote: true, // åœ¨ JSX ä¸­ä½¿ç”¨å•å¼•å·è€ŒéåŒå¼•å·
  trailingComma: 'none', // å°¾éšé€—å·
  bracketSpacing: true, // æ‹¬å·ç©ºæ ¼
  bracketSameLine: false, // å°†å¤šè¡Œ HTMLï¼ˆHTMLã€JSXã€Vueã€Angularï¼‰å…ƒç´ çš„ > æ”¾åœ¨æœ€åä¸€è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å•ç‹¬æ”¾åœ¨ä¸‹ä¸€è¡Œï¼ˆä¸é€‚ç”¨äºè‡ªå…³é—­å…ƒç´ ï¼‰ã€‚
  arrowParens: 'avoid', // ç®­å¤´å‡½æ•°æ‹¬å·
  requirePragma: false, // è¦æ±‚ç”¨è¯­
  insertPragma: false, // æ’å…¥ç¼–è¯‘æŒ‡ç¤º
  htmlWhitespaceSensitivity: 'css', // HTML ç©ºç™½æ•æ„Ÿåº¦
  vueIndentScriptAndStyle: false, // Vue æ–‡ä»¶è„šæœ¬å’Œæ ·å¼æ ‡ç­¾ç¼©è¿›
  embeddedLanguageFormatting: 'auto', // åµŒå…¥å¼è¯­è¨€æ ¼å¼åŒ–
  singleAttributePerLine: true, // åœ¨ HTMLã€Vue å’Œ JSX ä¸­æ¯è¡Œå¼ºåˆ¶æ‰§è¡Œå•ä¸ªå±æ€§ã€‚
  'prettier/prettier': [
    // Prettier ä¸ ESLint é›†æˆé…ç½®
    'error',
    {
      endOfLine: 'auto'
    }
  ]
}

```

cã€ä»£ç ä¿®å¤
æ·»åŠ æŒ‡ä»¤ä¿®å¤

```json
{
  "script": {
    "lint:prettier": "prettier --write **/*.{js,json,tsx,css,less,scss,vue,html,md}",
  }
}
```

å¤§éƒ¨åˆ†IDEæ”¯æŒåœ¨ä¿®æ”¹ä»£ç åè¿›è¡Œè‡ªåŠ¨ä¿®å¤
WebStormeï¼šç›´æ¥åœ¨Settingä¸­æœç´¢prettierå³å¯è¿›è¡Œé…ç½®
![Alt text](./image-1.png)
vscodeä¸‹è½½prettieræ’ä»¶è¿›è¡Œé…ç½®ã€‚
dã€prettierçš„å¿½ç•¥æ–‡ä»¶
æ·»åŠ .prettierignoreæ–‡ä»¶

``` ignore
/lib
/dist
node_modules
*.md
.vscode
.idea
public
/docs
.husky
.local
/bin
/src/assets/


```

eã€prettierä¸eslintçš„é›†æˆ

æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ESLint ä»¥ Prettier è§„åˆ™ä¸ºå‡†ï¼Œå¼•å…¥ eslint-config-prettier ä¸ eslint-plugin-prettier æ’ä»¶ï¼Œæ·»åŠ  Prettier æ ¼å¼çš„ç›¸å…³è§„åˆ™ï¼Œå¹¶æ ¹æ® Prettier çš„é€‰é¡¹è¿›è¡Œè§„èŒƒæ£€æµ‹ã€‚ä¾‹å¦‚ä¸Šé¢ Prettier é…ç½®ä¸­çš„é›†æˆé…ç½®ä¸­çš„ endOfLineï¼Œå³æ”¹å˜äº†åœ¨ä½¿ç”¨ Prettier æ—¶ï¼Œå¯¹æ¯è¡Œæ¢è¡Œç¬¦çš„è§„èŒƒæ£€æµ‹ã€‚

### 3. gitä»£ç æäº¤è§„èŒƒ

#### æäº¤è§„èŒƒ

ä¸»æµçš„commit messageè§„èŒƒä¸ºï¼š

```
<type>(<scope>): <subject>
```

#### typeç±»å‹

feat: æ–°åŠŸèƒ½
fix: bugä¿®å¤
docs: ä»…æ–‡æ¡£æ›´æ”¹
style: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºç™½ã€æ ¼å¼è®¾ç½®ã€ç¼ºå¤± åˆ†å·ç­‰ï¼‰
refactor: æ—¢ä¸ä¿®å¤bugä¹Ÿä¸æ·»åŠ ç‰¹æ€§çš„ä»£ç æ›´æ”¹
perf: æ”¹è¿›æ€§èƒ½çš„ä»£ç æ›´æ”¹
test: æ·»åŠ ç¼ºå°‘çš„æµ‹è¯•æˆ–æ›´æ­£ç°æœ‰æµ‹è¯•
chore: å¯¹æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å’Œåº“ï¼ˆå¦‚æ–‡æ¡£ï¼‰çš„æ›´æ”¹
wip:æ­£åœ¨è¿›è¡Œä¸­çš„ï¼Œä¸”æœ‰å¯èƒ½å‡ºç°ä¸ç¨³å®šè¿è¡ŒçŠ¶æ€çš„æäº¤
tempï¼šä¸´æ—¶æ–‡ä»¶çš„æäº¤
revert:ä»£ç å›æ»š(ä½“ç°åœ¨ changelog)

#### scope/subject å…è®¸ä¸­æ–‡æè¿°

ä¸»è¦ä¸º:æ”¹åŠ¨æ¶‰åŠé¡µé¢/æ”¹åŠ¨å…·ä½“å†…å®¹
ä¾‹å¦‚ï¼š

```
# git commit -m "ç±»å‹: ä¿¡æ¯"
# æ–°å¢åŠŸèƒ½ç¤ºä¾‹
git commit -m "feat(ç™»å½•): æ–°å¢ç”¨æˆ·ç™»å½•åŠŸèƒ½"
# ä¿®å¤Bugç¤ºä¾‹
git commit -m "fix(é¦–é¡µ): ä¿®å¤é¦–é¡µç”¨æˆ·å¤´åƒä¸æ˜¾ç¤ºé—®é¢˜"

```

#### å¿½ç•¥æ–‡ä»¶é…ç½®

æ·»åŠ .gitignoreæ–‡ä»¶

``` ignore
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
.DS_Store
dist
dist-ssr
coverage
*.local
*.yaml

/cypress/videos/
/cypress/screenshots/

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.idea/*
*.ntvs*
*.njsproj
*.sln
*.sw?

*.tsbuildinfo

*.d.ts


```

### 4. husky

#### huskyä»‹ç»

husky æ˜¯ä¸€ä¸ª Git Hooks ç®¡ç†å·¥å…·ï¼Œå¯ä»¥è½»æ¾å®ç° Git Hooks çš„è‡ªåŠ¨åŒ–é…ç½®ã€‚

#### huskyä½¿ç”¨

aã€ å®‰è£…ä¾èµ–

```bash
pnpm install -D husky
```

bã€é…ç½®åˆå§‹åŒ– Hysky çš„å‘½ä»¤

```json
// package.json
{
  "script": {
    "prepare": "husky install"
  }
}
```

è¿è¡Œè¿™ä¸ªå‘½ä»¤

```bash
# è¿è¡Œåä¼šåˆå§‹åŒ–husky
pnpm run prepare
```

è¿è¡Œä¹‹åå°±ä¼šå‡ºç°.huskyæ–‡ä»¶å¤¹ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥é…ç½®åœ¨GItHookä¸­æ‰§è¡Œçš„æ“ä½œå•¦ğŸ˜€ã€‚

### 5. CommitLint

#### CommitLintä»‹ç»

CommitLintæ˜¯ä¸€ä¸ªç”¨äºéªŒè¯æäº¤æ¶ˆæ¯çš„lintå·¥å…·ï¼Œå¯ä»¥æ£€æµ‹æäº¤æ¶ˆæ¯çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¬¦åˆè§„èŒƒã€‚
å®˜æ–¹æ–‡æ¡£ï¼š[commitlint - Lint commit messages](https://commitlint.js.org/#/)

#### commitLintçš„ä½¿ç”¨

1. å®‰è£…commitlintç›¸å…³ä¾èµ–

```bash
pnpm install -D @commitlint/cli  @commitlint/config-conventional
```

- @commitlint/config-conventionalï¼šcommitlintè‡ªå®šä¹‰é…ç½®è§„åˆ™æ’ä»¶

2. åˆ›å»ºcommitlint.config.cjsæ–‡ä»¶

- å®˜æ–¹æ–‡æ¡£çš„é…ç½®è§„åˆ™è®²è§£ï¼š[Rules (commitlint.js.org)](https://commitlint.js.org/#/reference-rules?id=rules)

è§„åˆ™ç”±åç§°å’Œé…ç½®æ•°ç»„ç»„æˆï¼š
<é…ç½®åç§°>: [<è­¦æŠ¥çº§åˆ«>, <æ˜¯å¦å¯ç”¨>, <è§„åˆ™å¯¹åº”çš„å€¼>]

- è­¦æŠ¥çº§åˆ«
    - 0 æ— æç¤º disable
    - 1 è­¦å‘Š warning
    - 2 é”™è¯¯ error
- æ˜¯å¦å¯ç”¨
    - always å¯ç”¨
    - never ç¦ç”¨
- è§„åˆ™å¯¹åº”çš„å€¼ï¼šæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£è¿›è¡Œé…ç½®

```javascript
// è¿™é‡Œæ˜¯é€šä¿—çš„è§£é‡Š è¯¦æƒ…è¯·å‰å¾€å®˜æ–¹æ–‡æ¡£æŸ¥é˜…
module.exports = {
  ignores: [(commit) => commit.includes('init')],
  extends: ['@commitlint/config-conventional'],
  rules: {
    // ä¿¡æ¯ä»¥ç©ºæ ¼å¼€å¤´
    'body-leading-blank': [2, 'always'],
    'footer-leading-blank': [2, 'always'],
    // ä¿¡æ¯æœ€å¤§é•¿åº¦
    'header-max-length': [2, 'always', 108],
    // ä¿¡æ¯ä¸èƒ½æœªç©º
    'subject-empty': [2, 'never'],
    // ä¿¡æ¯ç±»å‹ä¸èƒ½æœªç©º
    'type-empty': [2, 'never'],
    // æäº¤ä¿¡æ¯çš„ç±»å‹ ä¸‹æ–‡æœ‰ä»‹ç»
    'type-enum': [
      2,
      'always',
      [
        'feat',
        'fix',
        'perf',
        'style',
        'docs',
        'test',
        'refactor',
        'build',
        'ci',
        'chore',
        'revert',
        'wip',
        'workflow',
        'types',
        'release',
        'temp'
      ],
    ],
  },
};
```

3. é…ç½®huskyé’©å­

```bash
# é…ç½® commit-msg é’©å­ è¿è¡Œ commitlint
# --no-install ä»£è¡¨å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—
npx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"
```

é…ç½®å®Œæˆåæˆ‘ä»¬å°±å¯ä»¥åœ¨git commitæ—¶è¿›è¡Œä¿¡æ¯çš„è§„èŒƒ
æˆ‘ä»¬éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ ¼å¼è¿›è¡Œæäº¤ï¼š

```bash
# git commit -m "ç±»å‹: ä¿¡æ¯"
# æ–°å¢åŠŸèƒ½ç¤ºä¾‹
git commit -m "feat(ç™»å½•): æ–°å¢ç”¨æˆ·ç™»å½•åŠŸèƒ½"
# ä¿®å¤Bugç¤ºä¾‹
git commit -m "fix(é¦–é¡µ): ä¿®å¤é¦–é¡µç”¨æˆ·å¤´åƒä¸æ˜¾ç¤ºé—®é¢˜"

```

### 6. LintStaged

#### LintStagedä»‹ç»

LintStaged æ˜¯ä¸€ä¸ª Git é’©å­å·¥å…·ï¼Œå®ƒå…è®¸ä½ é’ˆå¯¹ Git æäº¤ä¸­çš„æ–‡ä»¶è¿›è¡Œ lint æ£€æµ‹ã€‚
ä½¿ç”¨IDEçš„ä¿å­˜è‡ªåŠ¨ä¿®å¤ç›¸å½“éº»çƒ¦ï¼Œæ”¹å®Œä¹‹åéƒ½éœ€è¦ç­‰ä»–ä¿®å¤ä¸€ä¸‹ï¼Œå¤ªä¸æ–¹ä¾¿ã€‚
lint-stagedï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ git ç¼“å­˜ä¸­è¿›è¡Œä»£ç è´¨é‡ä¸é£æ ¼çš„ä¿®å¤ï¼Œåœ¨ä»£ç æäº¤å‰è¿›è¡Œç»Ÿä¸€æ ¡éªŒï¼Œé€šè¿‡åæ‰å¯ä»¥æäº¤ã€‚

#### LintStagedçš„ä½¿ç”¨

aã€å®‰è£…ä¾èµ–

```bash
pnpm install -D lint-staged
```

bã€æ·»åŠ æŒ‡ä»¤
åœ¨ package.json é…ç½®ä¸€ä¸ªæŒ‡ä»¤æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨

```json
{
  "script":{
    "lint:lint-staged": "lint-staged",
  }
}
```

cã€é…ç½®LintStaged

LintStaged çš„é…ç½®æ–‡ä»¶æ–¹å¼ä¹Ÿæœ‰å¤šç§ï¼šåœ¨ package.json ä¸­é…ç½®ï¼›ä½¿ç”¨lint-staged.js æˆ– lint-staged.config.jsï¼›ä½¿ç”¨.lintstagedrc.json æˆ–.lintstagedrc.yamlç­‰ç­‰ã€‚
è¿™é‡Œæˆ‘ä»¬åˆ›å»º lint-staged.config.cjs æ–‡ä»¶ã€‚

```js
module.exports = {
  "*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"],
  "{!(package)*.json,*.code-snippets,.!(browserslist)*rc}": ["prettier --write--parser json"],
  "package.json": ["prettier --write"],
  "*.vue": ["eslint --fix", "prettier --write"],
  "*.{scss,less,styl,html}": ["prettier --write"],
  "*.md": ["prettier --write"]
};

```

ä½¿ç”¨ husky é…ç½®ä¸€ä¸ª pre-commit é’©å­

```
# --no-install ä»£è¡¨å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—
npx husky add .husky/pre-commit "npm run lint:lint-staged"

```

è¿™æ ·å°±é…ç½®å®Œæ¯•å•¦ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ git commit -m "xxx" æ—¶ï¼Œlint-staged ä¼šè‡ªåŠ¨æ‰§è¡Œå¸®æˆ‘ä»¬è¿›è¡Œä»£ç è´¨é‡ä¸é£æ ¼çš„ä¿®å¤ã€‚

## ä¸‰ã€ç»„ä»¶å¼€å‘è§„èŒƒ

### 1ã€å¼€å‘é¡»çŸ¥

åŸºæœ¬ç»„ä»¶

- vue+ vue-router
- vuex
- element      //é¥¿äº†ä¹ˆç»„ä»¶åº“
- axios          //httpè¯·æ±‚å·¥å…·ç±»
- iconfont  //fontå›¾æ ‡åº“
  å¸¸ç”¨ä¾èµ–
- leaflet      //åœ°å›¾ç»„ä»¶
- iclient-leaflet

**<span style="color:red">æ–°å¢ç¬¬ä¸‰æ–¹åº“å¿…é¡»ä¸æ¡†æ¶è´Ÿè´£äººç¡®è®¤</span>**

### 2ã€å‘½åè§„èŒƒ

å•æ–‡ä»¶ç»„ä»¶å§‹ç»ˆä»¥å•è¯å¤§å†™å¼€å¤´ (PascalCase) å¤§é©¼å³°å¼
æ–‡ä»¶å¤¹åŠjsæ–‡ä»¶å‘½åç»Ÿä¸€é‡‡ç”¨è½¬å°å†™ã€ç ´æŠ˜å·è¿æ¥ ï¼ˆpascal-caseï¼‰
æ–‡ä»¶å‘½åç”¨è‹±æ–‡ç¿»è¯‘ï¼Œç¦æ­¢ä½¿ç”¨ä¸­æ–‡æ‹¼éŸ³

### 3ã€ç»„ä»¶ç»“æ„

### 4ã€ç»„ä»¶æ ·å¼è§„èŒƒ

